extends layout

block content
  nav(class="navbar navbar-light bg-secondary")
    div(class="container")
      a(class="btn btn-light btn-sm", style="font-size: .75rem;" href=`/dashboard/${menu.dashboardGUID}`) Back to Dashboard
  div(class="container")
    div(class="row")
      div(class="col")
        h1(class="display-4 mt-4")= menu.title
    ul(class="nav nav-tabs mt-3" id="myTab" role="tablist")
      each card, index in cards
        li(class="nav-item")
          a(class=`nav-link ${index === 0 ? "active": null}`, data-toggle="tab", href=`#${card.id}`, role="tab", aria-controls=card.id, aria-selected=`${index === 0 ? "true" : "false"}`) #{card.title}

      li(class="nav-item d-flex pl-1 pr-1 mb-1 ml-1")
        a(class="btn btn-primary border-primary m-auto", style="font-size: .75rem;", href=`/menu/${menu.id}/card/create`) 
          i(class="fa fa-plus-square mr-1") 
          | Create Card

    div(class="tab-content mt-4" id="myTabContent")
      each card, index in cards
        div(class=`tab-pane fade ${index === 0 ? "show active": null}`, id=card.id, role="tabpanel", aria-labelledby=`${card.id}-tab`) 
          div(class="row")
            div(class="col-md-12 col-lg-4")
              h2=card.title
              h4(class="mt-4") Items 
              div(id=`${card.id}CardCarousel` class="carousel slide w-75 m-auto" data-ride="carousel" data-interval="false")
                div(class="carousel-inner d-flex align-items-center" role="listbox")
                 -var count = 0
                  each day in card.days
                    div(class=`text-center day carousel-item ${count == 0 ? "active" : ""}`)
                      h6(class="pb-1 mb-3 border-bottom") #{day.date}
                      div
                        each item in day.items
                          p(class="text-left")= item.title
                          -count++
                a(class="carousel-control-prev" href=`#${card.id}CardCarousel` role="button" data-slide="prev")
                  span(class="carousel-control-prev-icon" aria-hidden="true")
                  span(class="sr-only") Previous
                a(class="carousel-control-next" href=`#${card.id}CardCarousel` role="button" data-slide="next")
                  span(class="carousel-control-next-icon" aria-hidden="true")
                  span(class="sr-only") Next
              h4(class="mt-4") Background Image
              p(class="mt-3 pl-4")= card.backgroundImage
              h4(class="mt-4") Display URL
              div(class="pl-4 mt-3")
                input(type="text" value= `${host}/card/${card.id}`)
            div(class="col-md-12 col-lg-8 pr-5 mt-3 frameCol")
              iframe(class="w-100 h-100" src=`/card/${card.id}`, frameborder="0", style="box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);")
          div(class="row mt-5 justify-content-center")
            a(href=`/menu/${menu.id}/card/${card.id}/edit`, class="btn btn-primary mr-1") Edit
            a(href=`/card/${card.id}/delete`, class="btn btn-danger mr-1 ml-1") Delete
            a(href=`/card/${card.id}`, class="btn btn-primary ml-1") View   
    if cards.length    
      hr